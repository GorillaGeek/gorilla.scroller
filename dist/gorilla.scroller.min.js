window.gorilla||(window.gorilla={}),function(i,e){function n(){var e=s.find("> section");e.each(function(n){d.add(i(this),n,e.length)})}function t(){var e;i(window).mousewheel(function(){return clearTimeout(e),event.deltaY>0?void(e=setTimeout(function(){o()},u.scrollDelay)):void(e=setTimeout(function(){r()},u.scrollDelay))})}function o(){var i=d.current();i.isScrollOnBottom()&&i.next()&&i.active(!1)}function r(){var i=d.current();i.isScrollOnTop()&&i.prev()&&i.prev().active(!0)}function l(){a=i("<nav class='gorilla-scroller-navigation' />");var e=i("<ul />");d.forEach(function(n){var t=i("<li />"),o=i("<a />");o.attr({section:n.index}),t.append(o),e.append(t)}),a.css({"z-index":d.length+u.zIndex}),a.append(e),s.append(a),setTimeout(function(){a.height(e.height()),c()},0)}function c(){if(a){var i=d.current();console.log(i.index),a.find("li").removeClass("active"),a.find("[section="+i.index+"]").parents("li").addClass("active")}}var s,a,u={zIndex:0,scrollDelay:300};e.scroller=function(e,n){this.init(i(e),n||{})},i.fn.gorillaScroller=function(i){return new e.scroller(this,i)};var d=[];d.add=function(i,e,n){d.push(new f(i,e,n-e+u.zIndex))},d.current=function(){return d.filter(function(i){return i.is(s.find(".gorilla-scroller-active").first())})[0]},d.find=function(i){var e=s.find("#gorilla-scroller-section-"+i);return e.size()?d.filter(function(i){return i.is(e)})[0]:null},e.scroller.prototype.init=function(e,o){s=e,i.extend(u,o),i("body").addClass("gorilla-scroller"),s.addClass("gorilla-scroller-root"),n(),t(),l(s)};var f=function(i,e,n){this.elem=i,this.index=e,this.active(!0),i.addClass("gorilla-scroller-section gorilla-scroller-section-"+e),i.attr("id","gorilla-scroller-section-"+e),i.css({"z-index":n})};f.prototype.is=function(e){return this.elem[0]===i(e)[0]},f.prototype.isScrollOnTop=function(){return 0===this.elem.scrollTop()},f.prototype.isScrollOnBottom=function(){return this.elem.scrollTop()>=this.elem[0].scrollHeight-this.elem.height()},f.prototype.active=function(i){return i?(this.elem.addClass("gorilla-scroller-active"),void c(this.index)):(this.elem.removeClass("gorilla-scroller-active"),void c(this.index))},f.prototype.prev=function(){return d.find(this.index-1)},f.prototype.next=function(){return d.find(this.index+1)}}(jQuery,window.gorilla);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdvcmlsbGEuc2Nyb2xsZXIuanMiXSwibmFtZXMiOlsid2luZG93IiwiZ29yaWxsYSIsIiQiLCJzZWN0aW9uc0NvbmZpZyIsInNlY3Rpb25zRG9tIiwicm9vdCIsImZpbmQiLCJlYWNoIiwiaW5kZXgiLCJzZWN0aW9ucyIsImFkZCIsInRoaXMiLCJsZW5ndGgiLCJldmVudENvbmZpZyIsInRpbWVvdXQiLCJtb3VzZXdoZWVsIiwiY2xlYXJUaW1lb3V0IiwiZXZlbnQiLCJkZWx0YVkiLCJzZXRUaW1lb3V0Iiwic2Nyb2xsRG93biIsInNldHRpbmdzIiwic2Nyb2xsRGVsYXkiLCJzY3JvbGxVcCIsImN1cnJlbnQiLCJpc1Njcm9sbE9uQm90dG9tIiwibmV4dCIsImFjdGl2ZSIsImlzU2Nyb2xsT25Ub3AiLCJwcmV2IiwibmF2aWdhdGlvbkNvbmZpZyIsIm5hdmlnYXRpb24iLCJ1bCIsImZvckVhY2giLCJpdGVtIiwibGkiLCJhIiwiYXR0ciIsInNlY3Rpb24iLCJhcHBlbmQiLCJjc3MiLCJ6LWluZGV4IiwiekluZGV4IiwiaGVpZ2h0IiwibmF2aWdhdGlvbkNoYW5nZSIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVDbGFzcyIsInBhcmVudHMiLCJhZGRDbGFzcyIsInNjcm9sbGVyIiwiZWxlbSIsImNvbmZpZyIsImluaXQiLCJmbiIsImdvcmlsbGFTY3JvbGxlciIsInRvdGFsU2VjdGlvbnMiLCJwdXNoIiwiU2VjdGlvbiIsImZpbHRlciIsImlzIiwiZmlyc3QiLCJkb20iLCJzaXplIiwicHJvdG90eXBlIiwiZXh0ZW5kIiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0IiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQUFBS0EsT0FBT0MsVUFDUkQsT0FBT0MsWUFHWCxTQUFXQyxFQUFHRCxHQWlFVixRQUFTRSxLQUNMLEdBQUlDLEdBQWNDLEVBQUtDLEtBQUssWUFDNUJGLEdBQVlHLEtBQUssU0FBVUMsR0FDdkJDLEVBQVNDLElBQUlSLEVBQUVTLE1BQU9ILEVBQU9K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TyxFQUFRTSxVQUFVcEMsY0FBZ0IsV0FDOUIsTUFBaUMsS0FBMUJqQixLQUFLd0MsS0FBS2UsYUFHckJSLEVBQVFNLFVBQVV2QyxpQkFBbUIsV0FDakMsTUFBT2QsTUFBS3dDLEtBQUtlLGFBQWdCdkQsS0FBS3dDLEtBQUssR0FBR2dCLGFBQWV4RCxLQUFLd0MsS0FBS1IsVUFHM0VlLEVBQVFNLFVBQVVyQyxPQUFTLFNBQVVBLEdBQ2pDLE1BQUlBLElBQ0FoQixLQUFLd0MsS0FBS0YsU0FBUywrQkFDbkJMLEdBQWlCakMsS0FBS0gsU0FJMUJHLEtBQUt3QyxLQUFLSixZQUFZLCtCQUN0QkgsR0FBaUJqQyxLQUFLSCxTQUcxQmtELEVBQVFNLFVBQVVuQyxLQUFPLFdBQ3JCLE1BQU9wQixHQUFTSCxLQUFLSyxLQUFLSCxNQUFRLElBR3RDa0QsRUFBUU0sVUFBVXRDLEtBQU8sV0FDckIsTUFBT2pCLEdBQVNILEtBQUtLLEtBQUtILE1BQVEsS0FJdkM0RCxPQUFRcEUsT0FBT0MiLCJmaWxlIjoiZ29yaWxsYS5zY3JvbGxlci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpZiAoIXdpbmRvdy5nb3JpbGxhKSB7XHJcbiAgICB3aW5kb3cuZ29yaWxsYSA9IHt9O1xyXG59XHJcblxyXG4oZnVuY3Rpb24gKCQsIGdvcmlsbGEpIHtcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgKiBWQVJTXHJcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgdmFyIHJvb3Q7XHJcbiAgICB2YXIgbmF2aWdhdGlvbjtcclxuICAgIHZhciBzZXR0aW5ncyA9IHtcclxuICAgICAgICB6SW5kZXg6IDAsXHJcbiAgICAgICAgc2Nyb2xsRGVsYXk6IDMwMFxyXG4gICAgfTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgKiBFWFBPUlRcclxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICBnb3JpbGxhLnNjcm9sbGVyID0gZnVuY3Rpb24gKGVsZW0sIGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuaW5pdCgkKGVsZW0pLCBjb25maWcgfHwge30pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLmZuLmdvcmlsbGFTY3JvbGxlciA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICByZXR1cm4gbmV3IGdvcmlsbGEuc2Nyb2xsZXIodGhpcywgY29uZmlnKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICogU0VDVElPTlNcclxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB2YXIgc2VjdGlvbnMgPSBbXTtcclxuXHJcbiAgICBzZWN0aW9ucy5hZGQgPSBmdW5jdGlvbiAoZWxlbSwgaW5kZXgsIHRvdGFsU2VjdGlvbnMpIHtcclxuICAgICAgICBzZWN0aW9ucy5wdXNoKG5ldyBTZWN0aW9uKGVsZW0sIGluZGV4LCB0b3RhbFNlY3Rpb25zIC0gaW5kZXggKyBzZXR0aW5ncy56SW5kZXgpKTtcclxuICAgIH07XHJcblxyXG4gICAgc2VjdGlvbnMuY3VycmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gc2VjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmlzKHJvb3QuZmluZCgnLmdvcmlsbGEtc2Nyb2xsZXItYWN0aXZlJykuZmlyc3QoKSk7XHJcbiAgICAgICAgfSlbMF07XHJcbiAgICB9O1xyXG5cclxuICAgIHNlY3Rpb25zLmZpbmQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB2YXIgZG9tID0gcm9vdC5maW5kKCcjZ29yaWxsYS1zY3JvbGxlci1zZWN0aW9uLScgKyBpbmRleCk7XHJcblxyXG4gICAgICAgIGlmICghZG9tLnNpemUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaXMoZG9tKTtcclxuICAgICAgICB9KVswXTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgICogTUVUSE9EU1xyXG4gICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIGdvcmlsbGEuc2Nyb2xsZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZWxlbSwgY29uZmlnKSB7XHJcbiAgICAgICAgcm9vdCA9IGVsZW07XHJcbiAgICAgICAgJC5leHRlbmQoc2V0dGluZ3MsIGNvbmZpZyk7XHJcblxyXG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnZ29yaWxsYS1zY3JvbGxlcicpO1xyXG4gICAgICAgIHJvb3QuYWRkQ2xhc3MoJ2dvcmlsbGEtc2Nyb2xsZXItcm9vdCcpO1xyXG5cclxuICAgICAgICBzZWN0aW9uc0NvbmZpZygpO1xyXG4gICAgICAgIGV2ZW50Q29uZmlnKCk7XHJcbiAgICAgICAgbmF2aWdhdGlvbkNvbmZpZyhyb290KTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gc2VjdGlvbnNDb25maWcoKSB7XHJcbiAgICAgICAgdmFyIHNlY3Rpb25zRG9tID0gcm9vdC5maW5kKCc+IHNlY3Rpb24nKTtcclxuICAgICAgICBzZWN0aW9uc0RvbS5lYWNoKGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICBzZWN0aW9ucy5hZGQoJCh0aGlzKSwgaW5kZXgsIHNlY3Rpb25zRG9tLmxlbmd0aCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZXZlbnRDb25maWcoKSB7XHJcbiAgICAgICAgdmFyIHRpbWVvdXQ7XHJcblxyXG4gICAgICAgICQod2luZG93KS5tb3VzZXdoZWVsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmRlbHRhWSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxEb3duKCk7XHJcbiAgICAgICAgICAgICAgICB9LCBzZXR0aW5ncy5zY3JvbGxEZWxheSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbFVwKCk7XHJcbiAgICAgICAgICAgIH0sIHNldHRpbmdzLnNjcm9sbERlbGF5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzY3JvbGxEb3duKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50ID0gc2VjdGlvbnMuY3VycmVudCgpO1xyXG5cclxuICAgICAgICBpZiAoIWN1cnJlbnQuaXNTY3JvbGxPbkJvdHRvbSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghY3VycmVudC5uZXh0KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3VycmVudC5hY3RpdmUoZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNjcm9sbFVwKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50ID0gc2VjdGlvbnMuY3VycmVudCgpO1xyXG5cclxuICAgICAgICBpZiAoIWN1cnJlbnQuaXNTY3JvbGxPblRvcCgpIHx8ICFjdXJyZW50LnByZXYoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdXJyZW50LnByZXYoKS5hY3RpdmUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbmF2aWdhdGlvbkNvbmZpZygpIHtcclxuICAgICAgICBuYXZpZ2F0aW9uID0gJChcIjxuYXYgY2xhc3M9J2dvcmlsbGEtc2Nyb2xsZXItbmF2aWdhdGlvbicgLz5cIik7XHJcbiAgICAgICAgdmFyIHVsID0gJChcIjx1bCAvPlwiKTtcclxuXHJcbiAgICAgICAgc2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgbGkgPSAkKFwiPGxpIC8+XCIpO1xyXG4gICAgICAgICAgICB2YXIgYSA9ICQoXCI8YSAvPlwiKTtcclxuXHJcbiAgICAgICAgICAgIGEuYXR0cih7IHNlY3Rpb246IGl0ZW0uaW5kZXggfSk7XHJcblxyXG4gICAgICAgICAgICBsaS5hcHBlbmQoYSk7XHJcbiAgICAgICAgICAgIHVsLmFwcGVuZChsaSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5hdmlnYXRpb24uY3NzKHsgJ3otaW5kZXgnOiBzZWN0aW9ucy5sZW5ndGggKyBzZXR0aW5ncy56SW5kZXggfSk7XHJcbiAgICAgICAgbmF2aWdhdGlvbi5hcHBlbmQodWwpO1xyXG4gICAgICAgIHJvb3QuYXBwZW5kKG5hdmlnYXRpb24pO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbmF2aWdhdGlvbi5oZWlnaHQodWwuaGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICBuYXZpZ2F0aW9uQ2hhbmdlKCk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbmF2aWdhdGlvbkNoYW5nZSgpIHtcclxuICAgICAgICBpZiAoIW5hdmlnYXRpb24pIHJldHVybjtcclxuXHJcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBzZWN0aW9ucy5jdXJyZW50KCk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnQuaW5kZXgpO1xyXG4gICAgICAgIG5hdmlnYXRpb24uZmluZCgnbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgbmF2aWdhdGlvbi5maW5kKCdbc2VjdGlvbj0nICsgY3VycmVudC5pbmRleCArICddJykucGFyZW50cygnbGknKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgICAqIFNFQ1RJT05TXHJcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgdmFyIFNlY3Rpb24gPSBmdW5jdGlvbiAoZWxlbSwgaW5kZXgsIHpJbmRleCkge1xyXG4gICAgICAgIHRoaXMuZWxlbSA9IGVsZW07XHJcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMuYWN0aXZlKHRydWUpO1xyXG5cclxuICAgICAgICBlbGVtLmFkZENsYXNzKCdnb3JpbGxhLXNjcm9sbGVyLXNlY3Rpb24gZ29yaWxsYS1zY3JvbGxlci1zZWN0aW9uLScgKyBpbmRleCk7XHJcbiAgICAgICAgZWxlbS5hdHRyKCdpZCcsICdnb3JpbGxhLXNjcm9sbGVyLXNlY3Rpb24tJyArIGluZGV4KTtcclxuICAgICAgICBlbGVtLmNzcyh7ICd6LWluZGV4JzogekluZGV4IH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBTZWN0aW9uLnByb3RvdHlwZS5pcyA9IGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbVswXSA9PT0gJChlbGVtKVswXTtcclxuICAgIH07XHJcblxyXG4gICAgU2VjdGlvbi5wcm90b3R5cGUuaXNTY3JvbGxPblRvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtLnNjcm9sbFRvcCgpID09PSAwO1xyXG4gICAgfTtcclxuXHJcbiAgICBTZWN0aW9uLnByb3RvdHlwZS5pc1Njcm9sbE9uQm90dG9tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW0uc2Nyb2xsVG9wKCkgPj0gKHRoaXMuZWxlbVswXS5zY3JvbGxIZWlnaHQgLSB0aGlzLmVsZW0uaGVpZ2h0KCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBTZWN0aW9uLnByb3RvdHlwZS5hY3RpdmUgPSBmdW5jdGlvbiAoYWN0aXZlKSB7XHJcbiAgICAgICAgaWYgKGFjdGl2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW0uYWRkQ2xhc3MoJ2dvcmlsbGEtc2Nyb2xsZXItYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIG5hdmlnYXRpb25DaGFuZ2UodGhpcy5pbmRleCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZWxlbS5yZW1vdmVDbGFzcygnZ29yaWxsYS1zY3JvbGxlci1hY3RpdmUnKTtcclxuICAgICAgICBuYXZpZ2F0aW9uQ2hhbmdlKHRoaXMuaW5kZXgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBTZWN0aW9uLnByb3RvdHlwZS5wcmV2ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBzZWN0aW9ucy5maW5kKHRoaXMuaW5kZXggLSAxKTtcclxuICAgIH07XHJcblxyXG4gICAgU2VjdGlvbi5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gc2VjdGlvbnMuZmluZCh0aGlzLmluZGV4ICsgMSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbn0pKGpRdWVyeSwgd2luZG93LmdvcmlsbGEpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
